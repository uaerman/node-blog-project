<%- include("partials/_header") %>

<body>
  <%- include("partials/_menu") %>
  <link rel="stylesheet" href="/css/userprofile.css" />
  <div class="container">
    <div class="row profile">
      <div class="col-md-3">
        <div class="profile-sidebar">
          <!-- SIDEBAR USERPIC -->
          <div class="profile-userpic" style="padding-left: 100px">
            <img src="<%=user.url%>" class="img-responsive" alt="" />
          </div>
          <!-- END SIDEBAR USERPIC -->
          <!-- SIDEBAR USER TITLE -->
          <div class="profile-usertitle">
            <div class="profile-usertitle-name">
              <%= user.username.charAt(0).toUpperCase() +
              user.username.slice(1)%>
            </div>
          </div>
          <!-- END SIDEBAR USER TITLE -->
          <!-- SIDEBAR BUTTONS -->
          <div class="profile-userbuttons">
            <% if (!inFollowers) { %>
            <button
              onclick="location.href= '/users/follow/<%=user._id%>'"
              type="button"
              class="btn btn-success btn-sm"
            >
              Follow User
            </button>
            <% } else { %>
            <button
              onclick="location.href = '/users/unfollow/<%=user._id%>'"
              type="button"
              class="btn btn-success btn-sm"
            >
              UnFollow User
            </button>
            <% } %>
            <button
              onclick="openEditForm()"
              type="button"
              class="btn btn-primary btn-sm"
            >
              <i class="fa fa-heart" aria-hidden="true"></i> Support Creator
            </button>
          </div>
          <!-- END SIDEBAR BUTTONS -->

          <div class="portlet light bordered">
            <!-- STAT -->
            <div class="row list-separated profile-stat">
              <div class="col-md-4 col-sm-4 col-xs-6">
                <div class="uppercase profile-stat-title">
                  <%=posts.length%>
                </div>
                <div class="uppercase profile-stat-text">Posts</div>
              </div>
              <div class="col-md-4 col-sm-4 col-xs-6">
                <div class="uppercase profile-stat-title">
                  <%=user.followers.length%>
                </div>
                <div class="uppercase profile-stat-text"><a class="profile-stat-text" href="/users/<%=user._id%>/followers">Followers</a></div>
              </div>
              <div class="col-md-4 col-sm-4 col-xs-6">
                <div class="uppercase profile-stat-title">
                  <%=user.followings.length%>
                </div>
                <div class="uppercase profile-stat-text"><a class="profile-stat-text" href="/users/<%=user._id%>/followings">Followings</a></div>
              </div>
            </div>
            <!-- END STAT -->
            <div>
              <h4 class="profile-desc-title">
                About <%= user.username.charAt(0).toUpperCase() +
                user.username.slice(1)%>
              </h4>
              <span class="profile-desc-text"><%=user.profileDesc%></span>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-9">
        <div class="profile-content">
          <div class="container" style="margin-top: 25px">
            <div class="row">
              <%for (post of posts) {%>
              <div class="col-sm-3" style="margin-left: 70px">
                <div class="card posts-card" style="width: 18rem">
                  <img
                    class="card-img-top"
                    src="<%=post.url%>"
                    alt="Card image cap"
                  />
                  <div class="card-body">
                    <h5 class="card-title"><%=post.title%></h5>
                    <p class="card-text"><%=post.content.substring(0, 80)%></p>
                    <a href="/posts/<%=post._id%>" class="btn btn-primary"
                      >Read more</a
                    >
                  </div>
                </div>
              </div>
              <%}%>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <%- include("partials/_footer") %>
</body>
<style></style>
